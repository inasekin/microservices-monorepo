## Создание нового сервиса в виде отдельного репозитория (submodule)

### Шаг 1. Создать новый репозиторий
1. Перейдите в вашу систему управления репозиториями.
2. Создайте новый репозиторий для сервиса:
  - Укажите имя репозитория, описание.
  - Репозиторий должен быть публичным.

### Шаг 2. Инициализировать структуру сервиса
1. Склонируйте новый репозиторий к себе локально.
2. Создайте стандартную структуру проекта, например:
   ```
   MyService
   ├── src
   │   └── MyService.csproj
   ├── tests
   │   └── MyService.Tests.csproj
   ├── .gitignore
   ├── README.md
   └── ...
   ```
3. Инициализируйте решение (solution) и проект (project), если вы используете .NET:
   ```bash
   dotnet new sln -n MyService
   cd src
   dotnet new webapi -n MyService
   cd ..
   dotnet sln MyService.sln add src/MyService/MyService.csproj
   ```

### Шаг 3. Подключить репозиторий как submodule к основному проекту
1. В корне основного репозитория выполните команду:
   ```bash
   git submodule add <URL-на-новый-репозиторий> path/to/submodule
   ```
2. Закоммитьте изменения в основном репозитории:
   ```bash
   git commit -m "feat: добавлен новый сервис в submodules"
   ```
3. При необходимости пропишите в основном решение ссылки на проекты submodule (через `ProjectReference` или NuGet-пакет, если собираетесь публиковать сервис как пакет).

### Шаг 5. Управление submodule
1. Чтобы обновить submodule на последний коммит из его репозитория, выполните:
   ```bash
   cd path/to/submodule
   git pull origin main
   cd ../..
   git add path/to/submodule
   git commit -m "Update submodule to latest commit"
   ```
2. Чтобы клонировать основной репозиторий вместе с submodule:
   ```bash
   git clone --recursive <URL-на-основной-репозиторий>
   ```
   Если без `--recursive`, то submodule нужно инициализировать вручную:
   ```bash
   git submodule init
   git submodule update
   ```
   Если вы уже склонировали репозиторий, то выполните команду
    ```bash
    git submodule update --init --recursive
    ```

---

## Создание нового сервиса внутри текущего репозитория

### Шаг 1. Определиться со структурой решения
1. Находясь в корне текущего репозитория, просмотрите структуру проекта уже существующих сервисов в src/Services и выберите подходящую вам или сделайте свою.

### Шаг 2. Создание и инициализация сервиса
1. Добавьте/инициализируйте ваш сервис именно в src/Services, а так же не забудьте добавить его в MicroservicesMonorepo.sln.

### Шаг 3. Настроить зависимости
1. Если новый сервис зависит от других проектов в текущем репозитории, добавьте соответствующие ссылки в `.csproj` через `<ProjectReference>` или установите необходимые NuGet-пакеты.
2. Убедитесь, что ссылки не вызывают циклические зависимости.

### Шаг 4. Настроить CI/CD (если требуется)
1. Добавьте/обновите файлы конфигурации CI/CD (GitHub Actions, GitLab CI и т. д.) в основном репозитории, чтобы сборка и тесты нового сервиса выполнялись автоматически.
2. Добавьте тестовые проекты (если нужны) и проверьте, что они корректно подключаются к вашему CI/CD.

### Шаг 5. Проверить локально и зафиксировать изменения
1. Убедитесь, что сервис запускается локально (`dotnet run`), и что тесты (если есть) проходят успешно.
2. Закоммитьте все изменения:
   ```bash
   git add .
   git commit -m "feat: добавлен новый сервис"
   ```

## Итоги
1. **Отдельный репозиторий (submodule)** — полезно, когда сервис требует независимого цикла релизов, или планируется использовать его в нескольких проектах.
2. **Внутри текущего репозитория** — подходит, когда сервис — часть одного общего решения, и вам важна единая кодовая база.
